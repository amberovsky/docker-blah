{% extends '../../../layout/index.html.twig' %}

{% block sidebar %}
    {% include './../../partial.sidebar.html.twig' %}
{% endblock %}

{% block content %}
    <h1 class="page-header"><span class="fa fa-th fa-fw"></span>&nbsp;&nbsp;<a href="/node/{{ request.node.getId() }}/containers/" class="btn btn-danger btn-sm" role="button"><span class="fa fa-hand-o-left fa-lg"></span>&nbsp;&nbsp;Go back to containers in node <strong>{{ request.node.getName() }}</strong></a>&nbsp;&nbsp;Container #{{ request.container.id|truncate(12, True, '') }}</h1>

    {% block tabs %}
        {% include './partial.tab.html.twig' %}
    {% endblock %}

    <br />

    <textarea id="logs" name="logs" class="form-control textarea-terminal" rows="30" readonly></textarea>

    <script>
        var
            socket = io.connect('/'),
            textarea = $('#logs');

        socket.emit('containerlog', {
            nodeId: {{ request.node.getId() }},
            containerId: '{{ request.container.id }}'
        });

        socket.on('data', function (response) {
            if (!response.error) {
                textarea.append(response.data);
                textarea.scrollTop(textarea[0].scrollHeight);
            }
        });
    </script>
{% endblock %}
